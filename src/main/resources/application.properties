spring.application.name=10xcards

# ============================================================================
# Database Configuration - PostgreSQL
# ============================================================================
# Database connection properties
# For production, use environment variables or external configuration
spring.datasource.url=jdbc:postgresql://localhost:5432/10xcards
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection pool configuration (HikariCP - default in Spring Boot)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000

# ============================================================================
# JPA / Hibernate Configuration
# ============================================================================
# Disable automatic schema generation - we use Liquibase for migrations
spring.jpa.hibernate.ddl-auto=none

# Show SQL queries in logs (set to false in production)
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# PostgreSQL dialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ============================================================================
# Liquibase Configuration
# ============================================================================
# Enable Liquibase migrations
spring.liquibase.enabled=true

# Path to master changelog file
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.xml

# Liquibase schema for tracking changes (default is public)
spring.liquibase.default-schema=public

# Drop all database objects before running migrations (DANGER: use only in dev)
# NEVER enable this in production
spring.liquibase.drop-first=false

# ============================================================================
# JWT Configuration
# ============================================================================
# JWT secret key (256-bit minimum, use environment variable in production)
jwt.secret=${JWT_SECRET:change-this-to-a-secure-secret-key-at-least-256-bits-long-in-production}

# JWT token expiration times (in milliseconds)
# Access token: 15 minutes = 900000 ms
jwt.access-token-expiration=900000
# Refresh token: 7 days = 604800000 ms
jwt.refresh-token-expiration=604800000

# ============================================================================
# Email Configuration
# ============================================================================
# Email server configuration (use environment variables in production)
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# ============================================================================
# Application Configuration
# ============================================================================
# Frontend URL (for password reset links)
app.frontend-url=${FRONTEND_URL:http://localhost:3000}

# ============================================================================
# Rate Limiting Configuration
# ============================================================================
# Login rate limiting
app.rate-limit.login.max-attempts=5
app.rate-limit.login.duration=15m

# Password reset rate limiting
app.rate-limit.password-reset.max-attempts=3
app.rate-limit.password-reset.duration=1h

# ============================================================================
# Security Configuration
# ============================================================================
# BCrypt password encoding strength (10-14 recommended, higher = slower but more secure)
app.security.bcrypt-strength=12

# ============================================================================
# Cache Configuration
# ============================================================================
# Cache type (simple for development, redis for production)
spring.cache.type=simple

# ============================================================================
# Actuator Configuration
# ============================================================================
# Expose health and info endpoints
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized

# ============================================================================
# AI Generation Configuration (OpenRouter)
# ============================================================================
# OpenRouter API configuration
app.ai.openrouter.api-key=${OPENROUTER_API_KEY:}
app.ai.openrouter.base-url=https://openrouter.ai/api/v1
app.ai.openrouter.model=openai/gpt-4
app.ai.openrouter.timeout=30000

# AI generation limits
app.ai.monthly-generation-limit=100
app.ai.rate-limit-per-minute=10

# Prompt template for flashcard generation
app.ai.prompt-template=Generate 8-12 flashcard question-answer pairs from the following text. Return JSON array with format: [{"front": "question", "back": "answer"}]. Text: {text}
